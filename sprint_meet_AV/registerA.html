<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inscription Athlète</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <h1>Inscription Athlète</h1>
    <form id="registerForm" action="scripts/register.php" method="post" enctype="multipart/form-data">
        <div id="athleteChoice">
            <p>Souhaitez-vous créer un compte équipe ou individuel ?</p>
            <button type="button" id="btnEquipe">Équipe</button>
            <button type="button" id="btnIndividuel">Individuel</button>
        </div>

        <div id="commonFields" class="hidden">
            <label for="prenom">Prénom:</label>
            <input type="text" id="prenom" name="prenom" required>
            
            <label for="nom">Nom:</label>
            <input type="text" id="nom" name="nom" required>
            
            <label for="email">Email:</label>
            <input type="email" id="email" name="email" required>
            
            <label for="mot_de_passe">Mot de passe :</label>
            <input type="password" id="mot_de_passe" name="mot_de_passe" required>
        </div>

        <!-- CHAMPS POUR LES ÉQUIPES -->
        <div id="equipeFields" class="roleFields hidden">
            <label for="nom_equipe">Nom de l'équipe :</label>
            <input type="text" id="nom_equipe" name="nom_equipe" disabled>
            
            <label for="sexe_equipe">Sexe des participants :</label>
            <select id="sexe_equipe" name="sexe_equipe" disabled>
                <option value="">Choisissez le sexe des participants</option>
                <option value="homme">Homme</option>
                <option value="femme">Femme</option>
            </select>

            <p>Chers participants, veuillez envoyer la liste des participants ainsi que leurs pièces d'identité à :</p>
            <p class="important">pureathleticsntc@gmail.com</p>

            <label for="discipline_equipe">Discipline :</label>
            <select id="discipline_equipe" name="discipline_equipe" disabled>
                <option value="">Choisissez la discipline</option>
            </select>

            <label for="record_equipe">Record officiel :</label>
            <input type="text" id="record_equipe" name="record_equipe" value="00:00:00" disabled>

            <label for="fichier_record_equipe">Fichier confirmant l'authenticité du record :</label>
            <input type="file" id="fichier_record_equipe" name="fichier_record_equipe" disabled>
        </div>

        <!-- CHAMPS POUR LES INDIVIDUELS -->
        <div id="individuelFields" class="roleFields hidden">
            <label for="sexe">Sexe :</label>
            <select id="sexe" name="sexe" disabled>
                <option value="">Choisissez votre sexe</option>
                <option value="homme">Homme</option>
                <option value="femme">Femme</option>
            </select>

            <label for="age">Âge :</label>
            <input type="number" id="age" name="age" min="18" disabled>

            <label for="pays">Pays:</label>
            <input type="text" id="pays" name="pays" disabled>

            <label for="record_individuel">Record officiel :</label>
            <input type="text" id="record_individuel" name="record_individuel" value="00:00:00" disabled>

            <label for="fichier_record_individuel">Fichier confirmant l'authenticité du record :</label>
            <input type="file" id="fichier_record_individuel" name="fichier_record_individuel" disabled>

            <label for="diplome">Diplôme secondaire :</label>
            <input type="file" id="diplome" name="diplome" disabled>

            <label for="piece_identite">Pièce d'identité :</label>
            <input type="file" id="piece_identite" name="piece_identite" disabled>
        </div>

        <button type="submit" id="submitButton" class="hidden">S'inscrire</button>
    </form>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const btnEquipe = document.getElementById("btnEquipe");
            const btnIndividuel = document.getElementById("btnIndividuel");
            const athleteChoice = document.getElementById("athleteChoice");
            const commonFields = document.getElementById("commonFields");
            const equipeFields = document.getElementById("equipeFields");
            const individuelFields = document.getElementById("individuelFields");
            const submitButton = document.getElementById("submitButton");

            let equipeInputs = document.querySelectorAll("#nom_equipe, #sexe_equipe, #discipline_equipe, #record_equipe, #fichier_record_equipe");
            let individuelInputs = document.querySelectorAll("#sexe, #age, #pays, #record_individuel, #fichier_record_individuel, #diplome, #piece_identite");

            function toggleFields(showEquipe) {
                athleteChoice.classList.add("hidden");
                commonFields.classList.remove("hidden");
                submitButton.classList.remove("hidden");

                if (showEquipe) {
                    equipeFields.classList.remove("hidden");
                    individuelFields.classList.add("hidden");
                    setRequired(equipeInputs, true);
                    setRequired(individuelInputs, false);
                } else {
                    equipeFields.classList.add("hidden");
                    individuelFields.classList.remove("hidden");
                    setRequired(individuelInputs, true);
                    setRequired(equipeInputs, false);
                }
            }

            function setRequired(fields, state) {
                fields.forEach(field => {
                    if (state) {
                        field.removeAttribute("disabled");
                        field.setAttribute("required", "required");
                    } else {
                        field.removeAttribute("required");
                        field.setAttribute("disabled", "disabled");
                    }
                });
            }

            btnEquipe.addEventListener("click", function() {
                toggleFields(true);
            });

            btnIndividuel.addEventListener("click", function() {
                toggleFields(false);
            });

            if (btnEquipe.checked) {
                toggleFields(true);
            } else if (btnIndividuel.checked) {
                toggleFields(false);
            }
        });
    </script>
</body>
</html>
